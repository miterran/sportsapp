{"version":3,"sources":["../../../../src/utils/functions/settleBetOrder/teaser.js"],"names":["teaser","Picks","action","toWin","atRisk","betAmount","amount","betType","type","picksHaveLost","some","status","picksHavePush","picksHavePostponed","picksHaveCancelled","picksHaveReview","picksHavePending","picksWonCounter","reduce","total","pick","isClosed","resultAmount","note","Number","title","content","line","wagerResultAmount","riskResultAmount","Math","abs","isNumber","round"],"mappings":"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","file":"teaser.js","sourcesContent":["import _ from 'lodash';\nimport teaserOddLine from '../../collections/teaserOddLine';\n\nconst teaser = ({ action, toWin, atRisk, amount: betAmount, type: betType }, Picks) => {\n\n//\tconst picksHaveWon       = _.some(Picks, { status: 'Won' });\t\t\t\n\tconst picksHaveLost      = _.some(Picks, { status: 'Lost' });\t\t\n\tconst picksHavePush      = _.some(Picks, { status: 'Push' });\t\t\n\tconst picksHavePostponed = _.some(Picks, { status: 'Postponed' });\n\tconst picksHaveCancelled = _.some(Picks, { status: 'Cancelled' });\n\tconst picksHaveReview    = _.some(Picks, { status: 'Review' });\n\tconst picksHavePending   = _.some(Picks, { status: 'Pending' });\n\t\n\t//\tconst allPicksWon        = _.every(Picks, { status: 'Won' });\n\t//\tconst allPicksLost       = _.every(Picks, { status: 'Lost' });\n\t//\tconst allPicksPush       = _.every(Picks, { status: 'Push' });\n\t//\tconst allPicksCancelled  = _.every(Picks, { status: 'Postponed' });\n\t//\tconst allPicksPostponed  = _.every(Picks, { status: 'Canceled' });\n\t//\tconst allPicksReview     = _.every(Picks, { status: 'Review' });\n\t//\tconst allPicksPending    = _.every(Picks, { status: 'Pending' });\n\n\tconst picksWonCounter = Picks.reduce((total, pick) => total + ( pick.status === 'Won' ), 0 );\n\t//\tconst picksLength = Picks.length;\n\n\tlet isClosed = false;\n\tlet status = 'Pending';\n\tlet resultAmount = null;\n\tlet note = {};\n\n\tif(action !== 'superTeaser'){\n\t\tswitch(true){\n\t\tcase picksHaveLost:\n\t\t\tisClosed = true;\n\t\t\tstatus = 'Lost';\n\t\t\tresultAmount = -Number(atRisk);\n\t\t\tbreak;\n\t\tcase picksHaveReview:\n\t\t\tstatus = 'Review';\n\t\t\tnote = { title: 'Review', content: 'To be determine!', status: 'warning' };\n\t\t\tbreak;\n\t\tcase picksHavePending:\n\t\t\tbreak;\n\t\tcase picksWonCounter >= 2:\n\t\t\tconst line = teaserOddLine[action][picksWonCounter];\n\t\t\tconst wagerResultAmount = line > 0 ? (betAmount * line / 100) : betAmount;\n\t\t\tconst riskResultAmount = line > 0 ? (betAmount * line / 100) : betAmount / Math.abs(line) * 100;\n\t\t\tresultAmount = betType === 'wager' ? wagerResultAmount : riskResultAmount;\n\t\t\tisClosed = true;\n\t\t\tstatus = 'Won';\n\t\t\tbreak;\n\t\tcase picksHavePush:\n\t\tcase picksWonCounter === 1:\n\t\t\tisClosed = true;\n\t\t\tstatus = 'Push';\n\t\t\tresultAmount = 0;\n\t\t\tbreak;\n\t\tcase picksHavePostponed:\n\t\tcase picksHaveCancelled:\n\t\t\tisClosed = true;\n\t\t\tstatus = 'Cancelled';\n\t\t\tresultAmount = 0;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tstatus = 'Review';\n\t\t\tnote = { title: 'Review', content: 'To be determine!', status: 'warning' };\n\t\t\tbreak;\n\t\t}\n\t}else{\n\t\tswitch(true){\n\t\tcase picksHavePush:\n\t\tcase picksHaveLost:\n\t\t\tisClosed = true;\n\t\t\tstatus = 'Lost';\n\t\t\tresultAmount = -Number(atRisk);\n\t\t\tbreak;\n\t\tcase picksWonCounter === 3:\n\t\t\tisClosed = true;\n\t\t\tstatus = 'Won';\n\t\t\tresultAmount = Number(toWin);\n\t\t\tbreak;\n\t\tcase picksHavePending:\n\t\t\tbreak;\n\t\tcase picksHavePostponed:\n\t\tcase picksHaveCancelled:\n\t\t\tisClosed = true;\n\t\t\tstatus = 'Cancelled';\n\t\t\tresultAmount = 0;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tstatus = 'Review';\n\t\t\tnote = { title: 'Review', content: 'To be determine!', status: 'warning' };\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn { isClosed: isClosed, status: status, resultAmount: _.isNumber(resultAmount) ? Math.round(resultAmount) : null, note: note };\n};\nexport default teaser;"]}