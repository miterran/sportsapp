{"version":3,"sources":["../../../../src/utils/functions/settleBetOrder/parlay.js"],"names":["parlay","Picks","atRisk","betType","type","betAmount","amount","picksHaveWon","some","status","picksHaveLost","picksHavePush","picksHavePostponed","picksHaveCancelled","picksHaveReview","picksHavePending","isClosed","resultAmount","note","Number","title","content","parlayLine","compact","map","oddLine","marked","Math","abs","reduce","a","b","line","wagerResultAmount","riskResultAmount","isNumber","round"],"mappings":"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","file":"parlay.js","sourcesContent":["import _ from 'lodash';\n\nconst parlay = ({ atRisk, type: betType, amount: betAmount }, Picks) => {\n\n\tconst picksHaveWon       = _.some(Picks, { status: 'Won' });\t\t\t\n\tconst picksHaveLost      = _.some(Picks, { status: 'Lost' });\t\t\n\tconst picksHavePush      = _.some(Picks, { status: 'Push' });\t\t\n\tconst picksHavePostponed = _.some(Picks, { status: 'Postponed' });\n\tconst picksHaveCancelled = _.some(Picks, { status: 'Cancelled' });\n\tconst picksHaveReview    = _.some(Picks, { status: 'Review' });\n\tconst picksHavePending   = _.some(Picks, { status: 'Pending' });\n\t\n\t//\tconst allPicksWon        = _.every(Picks, { status: 'Won' });\n\t//\tconst allPicksLost       = _.every(Picks, { status: 'Lost' })\n\t//\tconst allPicksPush       = _.every(Picks, { status: 'Push' });\n\t//\tconst allPicksCancelled  = _.every(Picks, { status: 'Postponed' })\n\t//\tconst allPicksPostponed  = _.every(Picks, { status: 'Cancelled' })\n\t//\tconst allPicksReview     = _.every(Picks, { status: 'Review' })\n\t//\tconst allPicksPending    = _.every(Picks, { status: 'Pending' })\n\n\tlet isClosed = false;\n\tlet status = 'Pending';\n\tlet resultAmount = null;\n\tlet note = {};\n\n\tswitch(true){\n\n\tcase picksHaveLost:\n\t\tisClosed = true;\n\t\tstatus = 'Lost';\n\t\tresultAmount = -Number(atRisk);\n\t\tbreak;\n\n\tcase picksHaveReview:\n\t\tstatus = 'Review';\n\t\tnote = { title: 'Review', content: 'To be determine!', status: 'warning' };\n\t\tbreak;\n\n\tcase picksHavePending:\n\t\tbreak;\n\n\tcase picksHaveWon:\n\t\tconst parlayLine = _.compact(Picks.map(({ status, marked: { oddLine } }) => status === 'Won' ? oddLine > 0 ? (oddLine + 100) / 100 : (Math.abs(oddLine) + 100) / Math.abs(oddLine) : null )).reduce((a, b) => a * b ) -1;\n\t\tconst line = parlayLine > 1 ? parlayLine * 100 : -(100 / parlayLine);\n\t\tconst wagerResultAmount = line > 0 ? (betAmount * line / 100) : betAmount;\n\t\tconst riskResultAmount = line > 0 ? (betAmount * line / 100) : betAmount / Math.abs(line) * 100;\n\t\tresultAmount = betType === 'wager' ? wagerResultAmount : riskResultAmount;\n\t\tisClosed = true;\n\t\tstatus = 'Won';\n\t\tbreak;\n\n\tcase picksHavePush:\n\t\tisClosed = true;\n\t\tstatus = 'Push';\n\t\tresultAmount = 0;\n\t\tbreak;\n\n\tcase picksHavePostponed:\n\tcase picksHaveCancelled:\n\t\tisClosed = true;\n\t\tstatus = 'Cancelled';\n\t\tresultAmount = 0;\n\t\tbreak;\n\n\tdefault:\n\t\tstatus = 'Review';\n\t\tnote = { title: 'Review', content: 'To be determine!', status: 'warning' };\n\t\tbreak;\n\t}\n\treturn { isClosed: isClosed, status: status, resultAmount: _.isNumber(resultAmount) ? Math.round(resultAmount) : null, note: note };\n};\n\nexport default parlay;"]}