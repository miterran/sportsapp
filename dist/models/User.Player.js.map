{"version":3,"sources":["../../src/models/User.Player.js"],"names":["Schema","options","discriminatorKey","PlayerSchema","weekNum","type","Number","default","required","isActivate","Boolean","isDeleted","Agent","Types","ObjectId","ref","wagerLimit","initialCredit","min","max","straight","parlay","basicTeaser","specialTeaser","bigTeaser","superTeaser","actionReverse","winReverse","maxWin","minRisk","straightTeam","enum","parlayTeam","basicTeaserTeam","specialTeaserTeam","bigTeaserTeam","superTeaserTeam","actionReverseTeam","winReverseTeam","updatedAt","Date","now","PlayerClass","update","$ne","isoWeek","$set","multi","loadClass","Player","discriminator"],"mappings":"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","file":"User.Player.js","sourcesContent":["import User from './User';\nimport BetOrder from './BetOrder'\nimport moment from 'moment';\nimport mongoose from 'mongoose';\nconst Schema = mongoose.Schema;\n\nconst options = { discriminatorKey: 'role' };\n\nconst PlayerSchema = new Schema({\n\tweekNum: { type: Number, default: 0, required: true },\n\tisActivate: { type: Boolean, default: true, required: true },\n\tisDeleted: { type: Boolean, default: false, required: true },\n\tAgent: { type: Schema.Types.ObjectId, ref: 'User' },\n\twagerLimit: {\n\t\tinitialCredit: { type: Number, min: 0, max: 999999, default: 1000, required: true },\n\t\tstraight: { type: Boolean, default: true, required: true },\n\t\tparlay: { type: Boolean, default: true, required: true },\n\t\tbasicTeaser: { type: Boolean, default: true, required: true },\n\t\tspecialTeaser: { type: Boolean, default: true, required: true },\n\t\tbigTeaser: { type: Boolean, default: true, required: true },\n\t\tsuperTeaser: { type: Boolean, default: true, required: true },\n\t\tactionReverse: { type: Boolean, default: true, required: true },\n\t\twinReverse: { type: Boolean, default: true, required: true },\n\t\tmaxWin: { type: Number, min: 1, max: 999999, default: 200, required: true },\n\t\tminRisk: { type: Number, min: 10, max: 1000, default: 10, required: true },\n\t\tstraightTeam: { type: Number, enum: [ 1 ], default: 1, required: true },\n\t\tparlayTeam: { type: Number, enum: [ 2, 3, 4, 5, 6, 7, 8 ], default: 8, required: true },\n\t\tbasicTeaserTeam: { type: Number, enum: [ 2, 3, 4, 5, 6, 7, 8 ], default: 8, required: true },\n\t\tspecialTeaserTeam: { type: Number, enum: [ 2, 3, 4, 5, 6, 7, 8 ], default: 8, required: true },\n\t\tbigTeaserTeam: { type: Number, enum: [ 2, 3, 4, 5, 6, 7, 8 ], default: 8, required: true },\n\t\tsuperTeaserTeam: { type: Number, enum: [ 3 ], default: 3, required: true },\n\t\tactionReverseTeam: { type: Number, enum: [ 2, 3, 4 ], default: 4, required: true },\n\t\twinReverseTeam: { type: Number, enum: [ 2, 3, 4 ], default: 4, required: true },\n\t\tupdatedAt: { type: Date, default: Date.now, required: true },\n\t},\n}, options );\n\nclass PlayerClass { \n\tget isUnderAgent() { \n\t\treturn this.Agent ? true : false\n\t}\n\tstatic resetWeeklyBalanceToZero(){\n\t\treturn this.update({ weekNum: { $ne: moment().isoWeek() } }, { $set: { weekNum: moment().isoWeek(), 'credit.balance': 0 }}, { multi: true });\n\t}\n}\n\nPlayerSchema.loadClass(PlayerClass);\n\nconst Player = User.discriminator('Player', PlayerSchema);\n\nexport default Player;\n"]}