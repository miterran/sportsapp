{"version":3,"sources":["../../src/models/Event.js"],"names":["Schema","isOddPointHasQuarter","Math","abs","point","initialOdd","awayMoneyLine","homeMoneyLine","awaySpreadPoint","awaySpreadLine","homeSpreadPoint","homeSpreadLine","totalOverPoint","totalOverLine","totalUnderPoint","totalUnderLine","drawLine","EventSchema","ID","type","String","required","uniqueID","unique","provider","bookmaker","sport","enum","period","league","region","matchTime","Date","isPicked","Boolean","default","team","home","homeROT","homePitcher","away","awayROT","awayPitcher","score","Number","odd","cutOffAt","isFinished","status","updatedAt","now","EventClass","url","HOSTURL","split","join","toLowerCase","replace","toUpperCase","isAfter","oddWithAction","actionOdds","Object","values","shift","isEmpty","compact","action","isMoneyActivate","isSpreadActivate","isTotalActivate","isDrawActivate","deleteMany","$exists","$lt","loadClass","Event","model"],"mappings":"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","file":"Event.js","sourcesContent":["import periodTypes from '../utils/lists/periodTypes';\nimport sportTypes from '../utils/lists/sportTypes';\nimport _ from 'lodash';\nimport mongoose from 'mongoose';\nimport moment from 'moment';\nimport config from '../config';\n\nconst Schema = mongoose.Schema;\n\nconst isOddPointHasQuarter = point => Math.abs(point) % 1 === 0.25 || Math.abs(point) % 1 === 0.75;\n\nconst initialOdd = {\n\tawayMoneyLine: null,\n\thomeMoneyLine: null,\n\tawaySpreadPoint: null,\n\tawaySpreadLine: null,\n\thomeSpreadPoint: null,\n\thomeSpreadLine: null,\n\ttotalOverPoint: null,\n\ttotalOverLine: null,\n\ttotalUnderPoint: null,\n\ttotalUnderLine: null,\n\tdrawLine: null,\n};\n\nconst EventSchema = new Schema({\n\tID: { type: String, required: true },\n\tuniqueID: { type: String, required: true, unique: true },\n\tprovider: { type: String, required: true },\n\tbookmaker: { type: String, required: true },\n\tsport: { type: String, enum: sportTypes, required: true },\n\tperiod: { type: String, enum: periodTypes, required: true },\n\tleague: { type: String, required: true },\n\tregion: { type: String },\n\tmatchTime: { type: Date, required: true },\n\tisPicked: { type: Boolean, default: false, required: true },\n\tteam: {\n\t\thome: { type: String, required: true },\n\t\thomeROT: { type: String, required: true },\n\t\thomePitcher: { type: String },\n\t\taway: { type: String, required: true },\n\t\tawayROT: { type: String, required: true },\n\t\tawayPitcher: { type: String }\n\t},\n\tscore: {\n\t\thome: { type: Number },\n\t\taway: { type: Number },\n\t},\n\todd: {\n\t\tawayMoneyLine: { type: Number },\n\t\thomeMoneyLine: { type: Number },\n\t\tawaySpreadPoint: { type: Number },\n\t\tawaySpreadLine: { type: Number },\n\t\thomeSpreadPoint: { type: Number },\n\t\thomeSpreadLine: { type: Number },\n\t\ttotalOverPoint: { type: Number },\n\t\ttotalOverLine: { type: Number },\n\t\ttotalUnderPoint: { type: Number },\n\t\ttotalUnderLine: { type: Number },\n\t\tdrawLine: { type: Number },\n\t},\n\tcutOffAt: { type: Date, required: true },\n\tisFinished: { type: Boolean, default: false, required: true },\n\tstatus: { type: String, enum: [ 'Pending', 'Finished', 'Cancelled', 'Postponed', 'Review' ], default: 'Pending', required: true },\n\tupdatedAt: { type: Date, default: Date.now, required: true },\n});\n\nclass EventClass {\n\tstatic deleteExpiredUnpickEvents(){\n\t\treturn this.deleteMany({ isPicked: { $exists: false }, cutOffAt: { $lt: moment() } });\n\t}\n\tget teamLogo(){\n\t\tconst url = config.HOSTURL\n\t\treturn {\n\t\t\taway: `${url}/images/teamlogos/${this.team.away.split(' ').join('_').toLowerCase().replace(/\\.|\\'|\\&/g, '')}.png`,\n\t\t\thome: `${url}/images/teamlogos/${this.team.home.split(' ').join('_').toLowerCase().replace(/\\.|\\'|\\&/g, '')}.png`,\n\t\t\tdefault: `${url}/images/teamlogos/${this.sport.toLowerCase()}.png`\n\t\t};\n\t}\n\tget title () { return `${this.sport} - ${this.region ? this.region + ' - ' : '' }${this.league}`.toUpperCase(); }\n\tget finishedAt () { if(this.isFinished) return this.updatedAt; return null; }\n\tget isOddExpired() { return moment().isAfter(moment(this.cutOffAt)); }\n\tget actionOdd() { return this.oddWithAction; }\n\tget isActionOddActivate() { \n\t\tconst actionOdds = Object.values(this.oddWithAction);\n\t\tactionOdds.shift();\n\t\treturn !_.isEmpty(_.compact(Object.values(actionOdds)));\n\t}\n\tset action(action){\n\t\t\n\t\tconst {\n\t\t\tawayMoneyLine,\n\t\t\thomeMoneyLine,\n\t\t\tawaySpreadPoint,\n\t\t\tawaySpreadLine,\n\t\t\thomeSpreadPoint,\n\t\t\thomeSpreadLine,\n\t\t\ttotalOverPoint,\n\t\t\ttotalOverLine,\n\t\t\ttotalUnderPoint,\n\t\t\ttotalUnderLine,\n\t\t\tdrawLine,\n\t\t} = this.odd;\n\n\t\tconst isMoneyActivate = ( awayMoneyLine !== 0 && awayMoneyLine !== null && homeMoneyLine !== 0 && homeMoneyLine !== null );\n\t\tconst isSpreadActivate = ( awaySpreadLine !== 0 && awaySpreadLine !== null && homeSpreadLine !== 0 && homeSpreadLine !== null );\n\t\tconst isTotalActivate = ( totalOverLine !== 0 && totalOverLine !== null && totalUnderLine !== 0 &&totalUnderLine !== null );\n\t\tconst isDrawActivate = ( drawLine !== 0 && drawLine !== null );\n\n\t\tswitch(action){\n\t\tcase 'straight':\n\t\t\tthis.oddWithAction = this.odd;\n\t\t\treturn;\n\t\tcase 'actionReverse':\n\t\tcase 'winReverse':\n\t\tcase 'parlay':\n\t\t\tif(this.sport !== 'Fighting' && this.sport !== 'ESports'){\n\t\t\t\tthis.oddWithAction = {\n\t\t\t\t\tawayMoneyLine: isMoneyActivate ? awayMoneyLine : null,\n\t\t\t\t\thomeMoneyLine: isMoneyActivate ? homeMoneyLine : null,\n\t\t\t\t\tawaySpreadPoint: isSpreadActivate ? (isOddPointHasQuarter(awaySpreadPoint) ? null : awaySpreadPoint) : null,\n\t\t\t\t\tawaySpreadLine: isSpreadActivate ? (isOddPointHasQuarter(awaySpreadPoint) ? null : awaySpreadLine) : null,\n\t\t\t\t\thomeSpreadPoint: isSpreadActivate ? (isOddPointHasQuarter(homeSpreadPoint) ? null : homeSpreadPoint) : null,\n\t\t\t\t\thomeSpreadLine: isSpreadActivate ? (isOddPointHasQuarter(homeSpreadPoint) ? null : homeSpreadLine) : null,\n\t\t\t\t\ttotalOverPoint: isTotalActivate ? (isOddPointHasQuarter(totalOverPoint) ? null : totalOverPoint) : null,\n\t\t\t\t\ttotalOverLine: isTotalActivate ? (isOddPointHasQuarter(totalOverPoint) ? null : totalOverLine) : null,\n\t\t\t\t\ttotalUnderPoint: isTotalActivate ? (isOddPointHasQuarter(totalUnderPoint) ? null : totalUnderPoint) : null,\n\t\t\t\t\ttotalUnderLine: isTotalActivate ? (isOddPointHasQuarter(totalUnderPoint) ? null : totalUnderLine) : null,\n\t\t\t\t\tdrawLine: isDrawActivate ? drawLine : null,\n\t\t\t\t};\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.oddWithAction = initialOdd;\n\t\t\treturn;\n\t\tcase 'basicTeaser':\n\t\t\tif(this.period === 'Full Game'){\n\t\t\t\tif(this.sport === 'Basketball' && (this.league === 'NBA' || this.league === 'NCAAB' || this.league === 'WNBA')){\n\t\t\t\t\tthis.oddWithAction = {\n\t\t\t\t\t\tawayMoneyLine: null,\n\t\t\t\t\t\thomeMoneyLine: null,\n\t\t\t\t\t\tawaySpreadPoint: isSpreadActivate ? awaySpreadPoint + 4 : null,\n\t\t\t\t\t\tawaySpreadLine: null,\n\t\t\t\t\t\thomeSpreadPoint: isSpreadActivate ? homeSpreadPoint + 4 : null,\n\t\t\t\t\t\thomeSpreadLine: null,\n\t\t\t\t\t\ttotalOverPoint: isTotalActivate ? totalOverPoint - 4 : null,\n\t\t\t\t\t\ttotalOverLine: null,\n\t\t\t\t\t\ttotalUnderPoint: isTotalActivate ? totalUnderPoint + 4 : null,\n\t\t\t\t\t\ttotalUnderLine: null,\n\t\t\t\t\t\tdrawLine: null,\n\t\t\t\t\t};\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.sport === 'Football' && (this.league === 'NFL' || this.league === 'NCAAF' || this.league === 'CFL')){\n\t\t\t\t\tthis.oddWithAction = {\n\t\t\t\t\t\tawayMoneyLine: null,\n\t\t\t\t\t\thomeMoneyLine: null,\n\t\t\t\t\t\tawaySpreadPoint: isSpreadActivate ? awaySpreadPoint + 6 : null,\n\t\t\t\t\t\tawaySpreadLine: null,\n\t\t\t\t\t\thomeSpreadPoint: isSpreadActivate ? homeSpreadPoint + 6 : null,\n\t\t\t\t\t\thomeSpreadLine: null,\n\t\t\t\t\t\ttotalOverPoint: isTotalActivate ? totalOverPoint - 6 : null,\n\t\t\t\t\t\ttotalOverLine: null,\n\t\t\t\t\t\ttotalUnderPoint: isTotalActivate ? totalUnderPoint + 6 : null,\n\t\t\t\t\t\ttotalUnderLine: null,\n\t\t\t\t\t\tdrawLine: null,\n\t\t\t\t\t};\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.oddWithAction = initialOdd;\n\t\t\treturn;\n\t\tcase 'specialTeaser':\n\t\t\tif(this.period === 'Full Game'){\n\t\t\t\tif(this.sport === 'Basketball' && (this.league === 'NBA' || this.league === 'NCAAB' || this.league === 'WNBA')){\n\t\t\t\t\tthis.oddWithAction = {\n\t\t\t\t\t\tawayMoneyLine: null,\n\t\t\t\t\t\thomeMoneyLine: null,\n\t\t\t\t\t\tawaySpreadPoint: isSpreadActivate ? awaySpreadPoint + 4.5 : null,\n\t\t\t\t\t\tawaySpreadLine: null,\n\t\t\t\t\t\thomeSpreadPoint: isSpreadActivate ? homeSpreadPoint + 4.5 : null,\n\t\t\t\t\t\thomeSpreadLine: null,\n\t\t\t\t\t\ttotalOverPoint: isTotalActivate ? totalOverPoint - 4.5 : null,\n\t\t\t\t\t\ttotalOverLine: null,\n\t\t\t\t\t\ttotalUnderPoint: isTotalActivate ? totalUnderPoint + 4.5 : null,\n\t\t\t\t\t\ttotalUnderLine: null,\n\t\t\t\t\t\tdrawLine: null,\n\t\t\t\t\t};\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.sport === 'Football' && (this.league === 'NFL' || this.league === 'NCAAF' || this.league === 'CFL')){\n\t\t\t\t\tthis.oddWithAction = {\n\t\t\t\t\t\tawayMoneyLine: null,\n\t\t\t\t\t\thomeMoneyLine: null,\n\t\t\t\t\t\tawaySpreadPoint: isSpreadActivate ? awaySpreadPoint + 6.5 : null,\n\t\t\t\t\t\tawaySpreadLine: null,\n\t\t\t\t\t\thomeSpreadPoint: isSpreadActivate ? homeSpreadPoint + 6.5 : null,\n\t\t\t\t\t\thomeSpreadLine: null,\n\t\t\t\t\t\ttotalOverPoint: isTotalActivate ? totalOverPoint - 6.5 : null,\n\t\t\t\t\t\ttotalOverLine: null,\n\t\t\t\t\t\ttotalUnderPoint: isTotalActivate ? totalUnderPoint + 6.5 : null,\n\t\t\t\t\t\ttotalUnderLine: null,\n\t\t\t\t\t\tdrawLine: null,\n\t\t\t\t\t};\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.oddWithAction = initialOdd;\n\t\t\treturn;\n\t\tcase 'bigTeaser':\n\t\t\tif(this.period === 'Full Game'){\n\t\t\t\tif(this.sport === 'Basketball' && (this.league === 'NBA' || this.league === 'NCAAB' || this.league === 'WNBA')){\n\t\t\t\t\tthis.oddWithAction = {\n\t\t\t\t\t\tawayMoneyLine: null,\n\t\t\t\t\t\thomeMoneyLine: null,\n\t\t\t\t\t\tawaySpreadPoint: isSpreadActivate ? awaySpreadPoint + 5 : null,\n\t\t\t\t\t\tawaySpreadLine: null,\n\t\t\t\t\t\thomeSpreadPoint: isSpreadActivate ? homeSpreadPoint + 5 : null,\n\t\t\t\t\t\thomeSpreadLine: null,\n\t\t\t\t\t\ttotalOverPoint: isTotalActivate ? totalOverPoint - 5 : null,\n\t\t\t\t\t\ttotalOverLine: null,\n\t\t\t\t\t\ttotalUnderPoint: isTotalActivate ? totalUnderPoint + 5 : null,\n\t\t\t\t\t\ttotalUnderLine: null,\n\t\t\t\t\t\tdrawLine: null,\n\t\t\t\t\t};\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.sport === 'Football' && (this.league === 'NFL' || this.league === 'NCAAF' || this.league === 'CFL')){\n\t\t\t\t\tthis.oddWithAction = {\n\t\t\t\t\t\tawayMoneyLine: null,\n\t\t\t\t\t\thomeMoneyLine: null,\n\t\t\t\t\t\tawaySpreadPoint: isSpreadActivate ? awaySpreadPoint + 7 : null,\n\t\t\t\t\t\tawaySpreadLine: null,\n\t\t\t\t\t\thomeSpreadPoint: isSpreadActivate ? homeSpreadPoint + 7 : null,\n\t\t\t\t\t\thomeSpreadLine: null,\n\t\t\t\t\t\ttotalOverPoint: isTotalActivate ? totalOverPoint - 7 : null,\n\t\t\t\t\t\ttotalOverLine: null,\n\t\t\t\t\t\ttotalUnderPoint: isTotalActivate ? totalUnderPoint + 7 : null,\n\t\t\t\t\t\ttotalUnderLine: null,\n\t\t\t\t\t\tdrawLine: null,\n\t\t\t\t\t};\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.oddWithAction = initialOdd;\n\t\t\treturn;\n\t\tcase 'superTeaser':\n\t\t\tif(this.period === 'Full Game'){\n\t\t\t\tif(this.sport === 'Basketball' && (this.league === 'NBA' || this.league === 'NCAAB' || this.league === 'WNBA')){\n\t\t\t\t\tthis.oddWithAction = {\n\t\t\t\t\t\tawayMoneyLine: null,\n\t\t\t\t\t\thomeMoneyLine: null,\n\t\t\t\t\t\tawaySpreadPoint: isSpreadActivate ? awaySpreadPoint + 7 : null,\n\t\t\t\t\t\tawaySpreadLine: null,\n\t\t\t\t\t\thomeSpreadPoint: isSpreadActivate ? homeSpreadPoint + 7 : null,\n\t\t\t\t\t\thomeSpreadLine: null,\n\t\t\t\t\t\ttotalOverPoint: isTotalActivate ? totalOverPoint - 7 : null,\n\t\t\t\t\t\ttotalOverLine: null,\n\t\t\t\t\t\ttotalUnderPoint: isTotalActivate ? totalUnderPoint + 7 : null,\n\t\t\t\t\t\ttotalUnderLine: null,\n\t\t\t\t\t\tdrawLine: null,\n\t\t\t\t\t};\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(this.sport === 'Football' && (this.league === 'NFL' || this.league === 'NCAAF' || this.league === 'CFL')){\n\t\t\t\t\tthis.oddWithAction = {\n\t\t\t\t\t\tawayMoneyLine: null,\n\t\t\t\t\t\thomeMoneyLine: null,\n\t\t\t\t\t\tawaySpreadPoint: isSpreadActivate ? awaySpreadPoint + 10 : null,\n\t\t\t\t\t\tawaySpreadLine: null,\n\t\t\t\t\t\thomeSpreadPoint: isSpreadActivate ? homeSpreadPoint + 10 : null,\n\t\t\t\t\t\thomeSpreadLine: null,\n\t\t\t\t\t\ttotalOverPoint: isTotalActivate ? totalOverPoint - 10 : null,\n\t\t\t\t\t\ttotalOverLine: null,\n\t\t\t\t\t\ttotalUnderPoint: isTotalActivate ? totalUnderPoint + 10 : null,\n\t\t\t\t\t\ttotalUnderLine: null,\n\t\t\t\t\t\tdrawLine: null,\n\t\t\t\t\t};\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.oddWithAction = initialOdd;\n\t\t\treturn;\n\t\tdefault: \n\t\t\tthis.oddWithAction = initialOdd;\n\t\t\treturn;\n\t\t}\n\t}\n}\n\nEventSchema.loadClass(EventClass);\n\n\nconst Event = mongoose.model('Event', EventSchema);\n\nexport default Event;"]}